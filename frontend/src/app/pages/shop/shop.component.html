<section class="shopping-cart-section" id="shopping-section">
    <h2 class="section-title" data-aos="fade-up" data-aos-duration="800">å®‡å®™å•†å“åº—</h2>
    <p class="section-subtitle" data-aos="fade-up" data-aos-delay="100">æ¢ç´¢å®‡å®™ï¼Œå¾é€™äº›ç²¾é¸å•†å“é–‹å§‹</p>

    <!-- å•†å“å±•ç¤ºå€ -->
    <div class="products-grid" data-aos="fade-up" data-aos-delay="200">
        <div class="product-card" *ngFor="let product of products" data-aos="zoom-in" data-aos-delay="300">
            <img [src]="product.image" [alt]="product.name" class="product-image">
            <div class="product-info">
                <h3 class="product-name">{{ product.name }}</h3>
                <p class="product-description">{{ product.description }}</p>
                <div class="product-price">${{ product.price }}</div>
                <button class="add-to-cart-btn" (click)="addToCart(product)">
                    åŠ å…¥è³¼ç‰©è»Š
                </button>
            </div>
        </div>
    </div>

    <!-- è³¼ç‰©è»Šå´é‚Šæ¬„ -->
    <div class="cart-sidebar" [class.active]="isCartOpen">
        <div class="cart-header">
            <h3>è³¼ç‰©è»Š</h3>
            <button class="close-cart-btn" (click)="toggleCart()">&times;</button>
        </div>
        <div class="cart-items">
            <div class="cart-item" *ngFor="let item of cartItems; let i = index">
                <img [src]="item.product.image" [alt]="item.product.name" class="cart-item-image">
                <div class="cart-item-info">
                    <h4>{{ item.product.name }}</h4>
                    <div class="quantity-controls">
                        <button (click)="decreaseQuantity(i)">-</button>
                        <span>{{ item.quantity }}</span>
                        <button (click)="increaseQuantity(i)">+</button>
                    </div>
                    <div class="item-price">${{ item.product.price * item.quantity }}</div>
                </div>
                <button class="remove-item-btn" (click)="removeFromCart(i)">&times;</button>
            </div>
        </div>
        <div class="cart-footer" *ngIf="cartItems.length > 0">
            <div class="cart-total">
                ç¸½è¨ˆ: ${{ getCartTotal() }}
            </div>
            <button class="checkout-btn" (click)="checkout()">çµå¸³</button>
        </div>
        <div class="empty-cart" *ngIf="cartItems.length === 0">
            <p>è³¼ç‰©è»Šæ˜¯ç©ºçš„</p>
        </div>
    </div>

    <!-- è³¼ç‰©è»ŠæŒ‰éˆ• -->
    <button class="cart-toggle-btn" (click)="toggleCart()" data-aos="fade-left">
        ğŸ›’ <span class="cart-count" *ngIf="getCartItemsCount() > 0">{{ getCartItemsCount() }}</span>
    </button>

    <div class="cart-overlay" [class.active]="isCartOpen" (click)="toggleCart()"></div>



    <!-- ç™»å…¥å½ˆçª— -->
    <div class="modal-overlay" *ngIf="isLoginModalOpen">
        <div class="modal-content" (click)="$event.stopPropagation()">
            <app-login
                (loginSuccess)="handleLoginSuccess($event)"
                (closeLogin)="isLoginModalOpen = false"
                (switchToRegister)="handleSwitchToRegister()">
            </app-login>
        </div>
    </div>

    <!-- è¨»å†Šå½ˆçª— -->
    <div class="modal-overlay" *ngIf="isRegisterModalOpen">
        <div class="modal-content" (click)="$event.stopPropagation()">
            <app-register
                (registerSuccess)="handleRegisterSuccess()"
                (closeRegister)="isRegisterModalOpen = false">
            </app-register>
        </div>
    </div>
</section>
